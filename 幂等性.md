[toc]

# 概念

数学和计算机学的概念，常见于抽象代数中

```javascript
f(n)=1^n //无论n等于多少，f(n)永远值等于1
```

编程中，一个幂等操作的特点是任意多次执行所产生的影响与一次执行影响相同



# 场景

1. 表单的重复提交
2. 创建业务订单，一次业务请求只能创建一次，不能重复创建



# 技术方案

1. 查询操作  查询一次和查询多次，在数据不变的情况下，查询结果是一样的。select查询操作天生是幂等的

2. 删除操作  删除操作也是幂等的，删除一次和删除多次都是把数据删除（一次成功后，删除的数据已经不存在，返回0,删除多个，返回结果多个）

3. 唯一索引，防止新增脏数据，比如：支付宝资金账户，支付宝也有用户账户，每个用户只能有一个资金账户，怎么防止给用户创建资金账户多个，给资金账户表中的用户ID字段加唯一索引，所以一个用户新增成功一个资金账户 

   要点：唯一索引或者唯一组合索引来防止新增数据存在脏数据（当表存在唯一索引，并发时新增报错时，再查询一次就可以了，数据应该存在了，返回数据即可）

4. token机制 防止页面重复提交

   生成唯一token，请求时带着这个token，完成token失效，只有一次成功，可以适用分布式系统